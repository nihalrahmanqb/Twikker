{% load humanize %}
<div class="container is-fluid" id="conversationapp">
    <div class="chatbox " id="chatcontainer">
        {% for message in messages %}
            <div>
                <article class="media messagebox {% if message.created_by == request.user %}palegreen is-pulled-right right-margin{% endif %}">
                    <figure class="media-left">
                        <p class="image is-3by4 is-32x32">
                            {% if message.created_by.twikkerprofile.avatar %}
                                <img class="is-rounded" src="{{ message.created_by.twikkerprofile.avatar.url }}">
                            {% endif %}
                        </p>
                    </figure>
                    <div class="media-content">
                        <div class="content">
                            <p>
                                <strong><a href="{% url 'twikkerprofile' message.created_by %}">{{ message.created_by.username }}</a></strong>
                                <small>{{ message.created_at|naturaltime }} </small>
                                <br>
                                <span class="subtitle">{{ message.content }}</span>
                            </p>
                        </div>
                    </div>
                </article>
            </div>
        {% endfor %}
        <div v-for="message in messages">
            <article :class="getClass(message.tweeker)">
                <figure class="media-left">
                    <p class="image is-3by4 is-32x32">
                        <img class="is-rounded" :src="message.avatar">
                    </p>
                </figure>
                <div class="media-content">
                    <div class="content">
                        <p>
                            <strong><a :href="/u/ + message.tweeker">[[ message.tweeker ]]</a></strong>
                            <small>[[ message.created_at ]]</small>
                            <br>
                            <span class="subtitle">[[ message.content ]]</span>
                        </p>
                    </div>
                </div>
            </article>
        </div>
    </div>
    <form class="top_margin_text" v-on:submit.prevent="submitMessage()">
    <div class="field has-addons">
        <div class="control is-expanded">
            <input type="text" class="input" v-model="content" placeholder="Your message..."></input>
        </div>
        <div class="control">
            <button class="button is-info is-primary">Send</button>
        </div>
    </div>
    </form>
</div>